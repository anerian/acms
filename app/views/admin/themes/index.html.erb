<h1>Theme listing</h1>
<ul class="themes">
  <% for theme in @themes do %>
    <% if theme[:active] %><li class="active"><% else %><li><% end %>
    <%= render :partial => 'theme_clip', :locals => { :theme => theme } %>
    </li>
  <% end %>
</ul>
<% content_for :foot do %>
<div id="dialog" title="Theme preview">
  <div id="dialog-content">
  </div>
</div>
<script type="text/javascript">
  $(document).ready( function() {
    var loadTheme = "";
    $('.theme-clip .preview-theme').click(function(e) { 
      var themeName = this.innerHTML;
      console.log("preview: " + themeName);
      e.preventDefault();
      $('#dialog').dialog({
        width: "800px",
        open: function(event,ui) {
          var frame = "<iframe style='width:800px;height:600px' src='" + "<%= @site_info.site_url %>" + "/?preview=" + themeName + "'></iframe>";
          console.log("openning dialog: " + frame);
          $("#dialog-content").html( frame );
        }
      });
    });
  });
</script>
<% end %>
